{% extends 'main.html' %}
{% block content %}
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        background-image: url('path/to/geometric-pattern.svg'); /* or use an online SVG pattern */
        background-size: 200px 200px;
        color: #1f2029;
        margin: 0;
        padding: 0;
    }
    
    
    .home-container {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
        gap: 20px;
        padding: 20px;
    }

    /* Sidebar Styling */
    .sidebar {
        background-color: #2d2e3a;
        padding: 20px;
        border-radius: 8px;
        color: #fff;
    }

    .sidebar h3 {
        margin-bottom: 15px;
        color: #b0b3c0;
    }

    .sidebar a {
        color: #66a2ff;
        text-decoration: none;
        display: block;
        padding: 8px 0;
        font-weight: 500;
    }

    .sidebar a:hover {
        color: #4787e0;
    }

    /* Main Content Styling */
    .main-content {
        background-color: #1f2029;
        padding: 20px;
        border-radius: 8px;
        color: #b0b3c0;
    }

    .main-content a.create-room {
        display: inline-block;
        margin-bottom: 15px;
        background-color: #66a2ff;
        color: #ffffff;
        padding: 8px 12px;
        border-radius: 4px;
        text-decoration: none;
        font-weight: bold;
    }

    .main-content a.create-room:hover {
        background-color: #4787e0;
    }

    .main-content .room {
        padding: 10px 0;
        border-bottom: 1px solid #444;
    }

    .main-content .room h5 a {
        color: #66a2ff;
        text-decoration: none;
        font-size: 1.1em;
    }

    .main-content .room h5 a:hover {
        color: #4787e0;
    }

    .main-content .room-actions a {
        color: #ff5252;
        margin-right: 10px;
        font-size: 0.9em;
        text-decoration: none;
    }

    .main-content .room-actions a:hover {
        color: #e64a19;
    }

    /* Top Hosts and Recent Activities Styling */
    .activity-container {
        background-color: #2d2e3a;
        padding: 20px;
        border-radius: 8px;
        color: #fff;
    }

    .activity-container h3 {
        color: #b0b3c0;
        font-weight: bold;
    }

    .activity-container .activity-item {
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #444;
    }

    .activity-container .activity-item:last-child {
        border-bottom: none;
    }

    .activity-container .activity-item strong {
        color: #66a2ff;
        font-weight: bold;
    }

    .activity-container .activity-item small {
        color: #999;
        display: block;
        font-size: 0.85em;
    }

    .activity-container .activity-item p {
        margin: 5px 0;
        color: #b0b3c0;
    }

    .activity-container .activity-item a {
        color: #ff5252;
        font-size: 0.85em;
        text-decoration: none;
    }

    .activity-container .activity-item a:hover {
        color: #e64a19;
        text-decoration: underline;
    }

    .activity-container .no-activity {
        color: #777;
        font-style: italic;
        text-align: center;
        padding: 10px;
    }

    /* Top Hosts Section */
    .top-hosts {
        background-color: #2d2e3a;
        padding: 20px;
        margin-top: 20px;
        border-radius: 8px;
        color: #fff;
    }

    .top-hosts h3 {
        color: #b0b3c0;
        font-weight: bold;
    }

    .top-hosts .host-item {
        margin-bottom: 15px;
    }

    .top-hosts .host-item a {
        color: #66a2ff;
        font-weight: 500;
        text-decoration: none;
    }

    .top-hosts .host-item a:hover {
        color: #4787e0;
    }
</style>

<div class="home-container">
    <!-- Sidebar for Topics -->
    <div class="sidebar">
        <h3>Browse Topics</h3>
        <div>
            <a href="{% url 'home' %}">ALL</a>
        </div>
        {% for topic in topics %}
        <div>
            <a href="{% url 'home' %}?q={{ topic.name }}">{{ topic.name }}</a>
        </div>
        {% endfor %}
    </div>

    <!-- Main Content for Rooms -->
    <div class="main-content">
        <a href="{% url 'create-room' %}" class="create-room">Create Room</a>
        {% for room in rooms %}
        <div class="room">
            <div class="room-actions">
                {% if request.user == room.host %}
                    <a href="{% url 'update-room' room.id %}">Edit</a>
                    <a href="{% url 'delete-room' room.id %}">Delete</a>
                {% endif %}
            </div>
            <span>{{ room.host.username }}</span>
            <h5><a href="{% url 'room' pk=room.id %}">{{ room.name }}</a></h5>
            <small>Topic: {{ room.topic.name }}</small>
        </div>
        {% endfor %}
    </div>

    <!-- Right Column for Top Hosts and Recent Activity -->
    <div>
        <!-- Top Hosts -->
        <div class="top-hosts">
            <h3>Top Hosts</h3>
            {% for host in top_hosts %}
            <div class="host-item">
                <a href="#">{{ host.username }}</a>
            </div>
            {% endfor %}
        </div>

        <!-- Recent Activity -->
        <div class="activity-container">
            <h3>Activity</h3>
            <hr>
            <div>
                {% for message in room_messages %}
                <div class="activity-item">
                    <strong>@{{ message.user.username }}</strong>
                    <small>{{ message.created|timesince }} ago</small>
                    <p>replied: {{ message }}</p>
                    {% if request.user == message.user %}
                    <a href="{% url 'delete-message' message.id %}">Delete</a>
                    {% endif %}
                </div>
                {% empty %}
                <p class="no-activity">No recent activity.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}
